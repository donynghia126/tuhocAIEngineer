ğŸ“… NgÃ y 18: Decorators - "Äá»™" hÃ m mÃ  khÃ´ng sá»­a code
Má»¥c tiÃªu: Viáº¿t Ä‘Æ°á»£c hÃ m bao bá»c (Wrapper) vÃ  dÃ¹ng cÃº phÃ¡p @ Ä‘á»ƒ Ä‘o thá»i gian cháº¡y code.

ğŸ“ BÃ i táº­p thá»±c hÃ nh
HÃ£y táº¡o file day18_decorators.py vÃ  giáº£i quyáº¿t 4 bÃ i táº­p sau theo thá»© tá»± tá»« dá»… Ä‘áº¿n khÃ³.

ğŸŸ¢ BÃ i 1: Higher-Order Function (BÆ°á»›c Ä‘á»‡m)
Má»¥c tiÃªu: Hiá»ƒu ráº±ng hÃ m cÃ³ thá»ƒ Ä‘Æ°á»£c truyá»n Ä‘i nhÆ° má»™t biáº¿n sá»‘.

YÃªu cáº§u:

Viáº¿t 2 hÃ m con:

nhan_doi(x): Tráº£ vá» x * 2.

binh_phuong(x): Tráº£ vá» x * x.

Viáº¿t hÃ m cáº¥p cao ap_dung(func, danh_sach):

Nháº­n vÃ o má»™t hÃ m func vÃ  má»™t list sá»‘.

Táº¡o ra list má»›i báº±ng cÃ¡ch Ã¡p dá»¥ng func vÃ o tá»«ng sá»‘.

Test:

Input: [1, 2, 3] vÃ  nhan_doi -> Output: [2, 4, 6].

Input: [1, 2, 3] vÃ  binh_phuong -> Output: [1, 4, 9].

ğŸŸ¡ BÃ i 2: Wrapper Function (CÆ¡ cháº¿ lÃµi)
Má»¥c tiÃªu: Hiá»ƒu cÃ¡ch "gÃ³i" má»™t hÃ m láº¡i Ä‘á»ƒ cháº¡y thÃªm code trÆ°á»›c vÃ  sau nÃ³.

YÃªu cáº§u:

Viáº¿t hÃ m ham_goc(): Chá»‰ in ra "TÃ´i lÃ  hÃ m gá»‘c".

Viáº¿t hÃ m trang_tri(func):

BÃªn trong Ä‘á»‹nh nghÄ©a hÃ m wrapper():

In: "--- Báº¯t Ä‘áº§u trang trÃ­ ---"

Gá»i func() (HÃ m gá»‘c).

In: "--- Káº¿t thÃºc trang trÃ­ ---"

return wrapper (Tráº£ vá» cÃ¡i hÃ m bá»c ngoÃ i).

Test (Thá»§ cÃ´ng):

GÃ¡n: ham_moi = trang_tri(ham_goc).

Gá»i: ham_moi().

ğŸ”´ BÃ i 3: Decorator @timer (Quan trá»ng cho AI)
Má»¥c tiÃªu: Äo xem code cháº¡y nhanh hay cháº­m. ÄÃ¢y lÃ  bÃ i táº­p kinh Ä‘iá»ƒn trong lá»™ trÃ¬nh.

YÃªu cáº§u:

Import thÆ° viá»‡n time.

Viáº¿t decorator timer(func):

HÃ m wrapper bÃªn trong pháº£i nháº­n *args, **kwargs (Ä‘á»ƒ cÃ¢n Ä‘Æ°á»£c má»i loáº¡i tham sá»‘).

Láº¥y giá» báº¯t Ä‘áº§u: t1 = time.time().

Cháº¡y hÃ m gá»‘c vÃ  lÆ°u káº¿t quáº£: result = func(*args, **kwargs).

Láº¥y giá» káº¿t thÃºc: t2 = time.time().

In ra: f"HÃ m {func.__name__} cháº¡y máº¥t: {t2 - t1} giÃ¢y".

return result.

Ãp dá»¥ng:

DÃ¹ng @timer cho hÃ m train_model_fake(): Cho ngá»§ 2 giÃ¢y (time.sleep(2)).

Test: Gá»i train_model_fake() vÃ  xem nÃ³ cÃ³ bÃ¡o giá» khÃ´ng.

âš« BÃ i 4: Decorator @debug (Thá»­ thÃ¡ch)
Má»¥c tiÃªu: In ra chi tiáº¿t tham sá»‘ Ä‘áº§u vÃ o vÃ  káº¿t quáº£ Ä‘áº§u ra Ä‘á»ƒ debug lá»—i.

YÃªu cáº§u: Viáº¿t decorator @debug sao cho khi gáº¯n vÃ o hÃ m cá»™ng:

Python

@debug
def add(a, b):
    return a + b
Khi gá»i add(5, 10), nÃ³ sáº½ tá»± Ä‘á»™ng in ra mÃ n hÃ¬nh:

Plaintext

[Debug] Äang gá»i hÃ m: add
[Debug] Tham sá»‘: (5, 10) {}
[Debug] Káº¿t quáº£: 15