ğŸ“… NgÃ y 20: Modules & Tá»• chá»©c Code
ğŸ¯ Má»¥c tiÃªu:

Modules: TÃ¡ch code thÃ nh 2 file riÃªng biá»‡t: student.py (Chá»©a logic xá»­ lÃ½) vÃ  main.py (Chá»©a giao diá»‡n cháº¡y).

Custom Exception: Tá»± táº¡o ra lá»—i riÃªng (vÃ­ dá»¥ InvalidAgeError) thay vÃ¬ dÃ¹ng lá»—i chung chung.

ğŸ“š 1. LÃ½ thuyáº¿t: Táº¡i sao pháº£i tÃ¡ch file?
Náº¿u dá»± Ã¡n cÃ³ 10.000 dÃ²ng code, Ä‘á»ƒ háº¿t trong 1 file thÃ¬ kÃ©o chuá»™t má»i tay, sá»­a chá»— nÃ y há»ng chá»— kia.

student.py (Module): LÃ  "Háº­u cáº§n". Chá»©a Class, HÃ m xá»­ lÃ½ dá»¯ liá»‡u. NÃ³ náº±m im Ä‘Ã³ chá» ngÆ°á»i gá»i.

main.py (Entry Point): LÃ  "Máº·t tiá»n". Chá»©a vÃ²ng láº·p Menu, nháº­p liá»‡u tá»« bÃ n phÃ­m. NÃ³ sáº½ import háº­u cáº§n Ä‘á»ƒ dÃ¹ng.

ğŸ’» 2. BÃ i táº­p thá»±c hÃ nh
Báº¡n hÃ£y táº¡o cÃ¹ng lÃºc 2 file trong cÃ¹ng 1 thÆ° má»¥c.

ğŸ“„ File 1: student.py (Chá»©a Logic & Class)
File nÃ y tuyá»‡t Ä‘á»‘i khÃ´ng cÃ³ lá»‡nh input() hay print() menu. Chá»‰ xá»­ lÃ½ dá»¯ liá»‡u.

Python

import json

# 1. Tá»± cháº¿ ra má»™t cÃ¡i lá»—i riÃªng (Custom Exception)
class InvalidAgeError(Exception):
    """Lá»—i khi tuá»•i khÃ´ng há»£p lá»‡ (< 0 hoáº·c > 150)"""
    pass

class Student:
    def __init__(self, uid, name, age):
        self.uid = uid
        self.name = name
        self.age = age

    def to_dict(self):
        return {"id": self.uid, "name": self.name, "age": self.age}

class StudentManager:
    def __init__(self, filename="students.json"):
        self.filename = filename
        self.students = self.load_data()

    def load_data(self):
        try:
            with open(self.filename, "r", encoding="utf-8") as f:
                data = json.load(f)
                return [Student(d["id"], d["name"], d["age"]) for d in data]
        except (FileNotFoundError, json.JSONDecodeError):
            return []

    def save_data(self):
        data = [s.to_dict() for s in self.students]
        with open(self.filename, "w", encoding="utf-8") as f:
            json.dump(data, f, ensure_ascii=False, indent=4)

    def add_student(self, name, age):
        # Validate tuá»•i á»Ÿ táº§ng Logic (nÃ©m ra lá»—i Custom)
        if age < 0 or age > 150:
            raise InvalidAgeError(f"Tuá»•i {age} khÃ´ng há»£p lÃ½!")
        
        # Táº¡o ID tá»± Ä‘á»™ng (Láº¥y ID cuá»‘i + 1, hoáº·c 1 náº¿u list rá»—ng)
        new_id = self.students[-1].uid + 1 if self.students else 1
        new_sv = Student(new_id, name, age)
        self.students.append(new_sv)
        self.save_data()
        return new_sv
    
    def get_all(self):
        return self.students
ğŸ“„ File 2: main.py (Cháº¡y chÆ°Æ¡ng trÃ¬nh)
File nÃ y sáº½ import file kia vÃ  xá»­ lÃ½ nháº­p liá»‡u an toÃ n.

Python

# Import class tá»« file student.py
from student import StudentManager, InvalidAgeError

manager = StudentManager()

while True:
    print("\n--- QUáº¢N LÃ SINH VIÃŠN (MODULAR) ---")
    print("1. ThÃªm sinh viÃªn")
    print("2. Xem danh sÃ¡ch")
    print("3. ThoÃ¡t")
    
    choice = input("Chá»n chá»©c nÄƒng: ")

    if choice == "1":
        try:
            # Nháº­p liá»‡u an toÃ n
            name = input("Nháº­p tÃªn: ").strip()
            if not name:
                raise ValueError("TÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng!")
                
            age_input = input("Nháº­p tuá»•i: ")
            if not age_input.isdigit():
                raise ValueError("Tuá»•i pháº£i lÃ  sá»‘ nguyÃªn!")
            
            age = int(age_input)
            
            # Gá»i logic bÃªn kia (cÃ³ thá»ƒ báº¯n ra lá»—i InvalidAgeError)
            sv = manager.add_student(name, age)
            print(f"âœ… ThÃªm thÃ nh cÃ´ng: {sv.name} (ID: {sv.uid})")

        except InvalidAgeError as e:
            print(f"âŒ Lá»—i Logic: {e}")
        except ValueError as e:
            print(f"âŒ Lá»—i Nháº­p liá»‡u: {e}")
        except Exception as e:
            print(f"âŒ Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh: {e}")

    elif choice == "2":
        lst = manager.get_all()
        if not lst:
            print("ğŸ“­ Danh sÃ¡ch trá»‘ng.")
        else:
            print(f"{'ID':<5} {'TÃªn':<20} {'Tuá»•i':<5}")
            print("-" * 30)
            for s in lst:
                print(f"{s.uid:<5} {s.name:<20} {s.age:<5}")

    elif choice == "3":
        print("Táº¡m biá»‡t!")
        break
    else:
        print("âŒ Chá»n sai rá»“i, nháº­p láº¡i Ä‘i!")
ğŸ“ Nhiá»‡m vá»¥ Day 20
Báº¡n hÃ£y táº¡o 2 file code trÃªn, sau Ä‘Ã³ cháº¡y file main.py. Thá»­ cÃ¡c trÆ°á»ng há»£p sau Ä‘á»ƒ test kháº£ nÄƒng báº¯t lá»—i:

Nháº­p tuá»•i lÃ  chá»¯ "abc" -> Code main.py pháº£i báº¯t Ä‘Æ°á»£c ValueError.

Nháº­p tuá»•i lÃ  -5 hoáº·c 200 -> Code student.py sáº½ nÃ©m ra InvalidAgeError, vÃ  main.py pháº£i báº¯t Ä‘Æ°á»£c nÃ³.